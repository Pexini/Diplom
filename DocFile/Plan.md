# ****Планирование автоматизации тестирования сервиса****

## Перечень автоматизируемых сценариев.

### Тестовые данные:

Номер карты: 16 цифр. Номер 4444 4444 4444 4441, статус Разрешен. Номер 4444 4444 4444 4442, статус Отклонен.
Месяц: цифры от 01 до 12, формат ХХ.
Год: две последние цифры, формат ХХ.
Владелец: символы латиницы от 1 символа. Разрешен - верхний регистр, дефис, пробел.
CVC/CVV - 3 цифры.


# UI-тесты

#### Валидные сценарии.

Зайти на сайт http://localhost:8080/
Предусловие, для каждого сценария:
1. Нажать кнопку Купить.
2. Нажать кнопку Купить в кредит.

1.Оплата тура с использованием валидных данных.
Шаги:
Ввести номер карты со статусом ОДОБРЕН.
Ввести валидное значение в поле Месяц.
Ввести валидное значение в поле Год.
Ввести валидное значение в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Появляется сообщение: “Успешно Операция одобрена банком”.
В БД появляется запись с информацией id пользователя, id_bank, временем создания документа и статусом APPROVED.

2. Отклоненный платеж при оплате картой со статусом ОТКЛОНЕН и с использованием валидных данных.
   Шаги:
   Ввести номер карты со статусом ОТКЛОНЕН.
   Ввести валидное значение в поле Месяц.
   Ввести валидное значение в поле Год.
   Ввести валидное значение в поле Владелец.
   Ввести валидное значение в поле CVC/CVV.
   Нажать кнопку Продолжить.

Ожидаемый результат: Появляется сообщение: ““Ошибка! Банк отказал в проведении операции”.
В БД появляется запись с информацией: id пользователя, id_bank, временем создания документа и статусом - DECLINED.

Невалидные сценарии тестирования UI.
Зайти на сайт http://localhost:8080/

1.Оплата картой без заполнения полей формы.
Шаги:
1. Нажать кнопку Продолжить.

Ожидаемый результат: Все поля для ввода данных подсвечены красным:
под полями с числовыми значениями появляется сообщение: “Неверный формат”;
под полем Владелец: “Поле обязательно для заполнения”.

2.Оплата картой с пустым полем Номер карты.
Шаги:
Оставить поле Номер карты пустым.
Ввести валидное значение в поле Месяц.
Ввести валидное значение в поле Год.
Ввести валидное значение в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле Номер карты подсвечивается красным,
появляется сообщение: “Неверный формат”.

3.Оплата картой с невалидным номером длиной 16 цифр.
Шаги:
Ввести номер карты, состоящий из 16 цифр.
Ввести валидное значение в поле Месяц.
Ввести валидное значение в поле Год.
Ввести валидное значение в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Появляется сообщение:  “Ошибка! Банк отказал в проведении операции”.

4.Оплата картой с номером длиной 15 цифр.
Шаги:
Ввести номер карты, состоящий из 15 цифр.
Ввести валидное значение в поле Месяц.
Ввести валидное значение в поле Год.
Ввести валидное значение в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле Номер карты подсвечивается красным,
появляется сообщение: “Неверный формат”.


5.Оплата с пустым полем Месяц и использованием остальных валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Оставить поле Месяц пустым.
Ввести валидное значение в поле Год.
Ввести валидное значение в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле Месяц подсвечивается красным, появляется
сообщение: “Неверный формат”.

6.Оплата со значением 00 в поле Месяц и использованием остальных валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Ввести значение 00 в поле Месяц.
Ввести валидное значение в поле Год.
Ввести валидное значение в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле Месяц подсвечивается красным, появляется
сообщение “Неверный формат”.

7.Оплата картой со значением 0 в поле Месяц и использованием валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Ввести значение 0 в поле Месяц.
Ввести валидное значение в поле Год.
Ввести валидное значение в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле Месяц подсвечивается красным, появляется
сообщение “Неверный формат”.

8.Оплата с любым значением больше 12 в поле Месяц и использованием остальных валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Ввести значение 13 в поле Месяц.
Ввести валидное значение в поле Год.
Ввести валидное значение в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле Месяц подсвечивается красным, появляется
сообщение: “Неверный формат”.

9.Оплата с пустым полем Год и использованием остальных валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Ввести валидное значение в поле Месяц.
Оставить поле Год пустым.
Ввести валидное значение в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле Год  подсвечивается красным, появляется сообщение “Неверный формат”.

10.Оплата со значением в поле Год, ранее текущего года и с использованием остальных валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Ввести валидное значение в поле Месяц.
Ввести в поле Год значение, ранее текущего года.
Ввести валидное значение в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле Год  подсвечивается красным, появляется
сообщение: “Истек срок действия карты”.


11.Оплата с одной цифрой в поле Год и использованием остальных валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Ввести валидное значение в поле Месяц.
Ввести в поле Год одну цифру.
Ввести валидное значение в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле Месяц подсвечивается красным, появляется
сообщение: “Неверный формат”.

12.Оплата с пустым полем Владелец и использованием остальных валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Ввести валидное значение в поле Месяц.
Ввести валидное значение в поле Год.
Оставить поле Владелец пустым.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле Владелец подсвечивается красным, появляется сообщение “Поле обязательно для заполнения”.

13.Оплата с использованием цифр в поле Владелец и использованием остальных валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Ввести валидное значение в поле Месяц.
Ввести валидное значение в поле Год.
Ввести цифры в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле Владелец подсвечивается красным, появляется сообщение “Неверный формат”.

14.Оплата с использованием кириллицы в поле Владелец и использованием остальных валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Ввести валидное значение в поле Месяц.
Ввести валидное значение в поле Год.
Ввести кириллицу в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле Владелец подсвечивается красным, появляется сообщение “Неверный формат”.

15.Оплата с использованием спецсимволов в поле Владелец и использованием остальных валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Ввести валидное значение в поле Месяц.
Ввести валидное значение в поле Год.
Ввести спецсимволы в поле Владелец.
Ввести валидное значение в поле CVC/CVV.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле Владелец подсвечивается красным, появляется сообщение “Неверный формат”.


16.Оплата с пустым полем CVC/CVV и использованием остальных валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Ввести валидное значение в поле Месяц.
Ввести валидное значение в поле Год.
Ввести валидное значение в поле Владелец.
Оставить поле CVC/CVV пустым.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле CVC/CVV подсвечивается красным, появляется
сообщение: “Неверный формат”.

17.Оплата с двумя цифрами в поле CVC/CVV и использованием остальных валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Ввести валидное значение в поле Месяц.
Ввести валидное значение в поле Год.
Ввести валидное значение в поле Владелец.
Ввести в поле CVC/CVV две цифры.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле CVC/CVV подсвечивается красным, появляется
сообщение: “Неверный формат”.

18.Оплата с одной цифрой в поле CVC/CVV и использованием остальных валидных данных.
Шаги:
Ввести валидный номер карты в поле Номер карты.
Ввести валидное значение в поле Месяц.
Ввести валидное значение в поле Год.
Ввести валидное значение в поле Владелец.
Ввести в поле CVC/CVV одну цифру.
Нажать кнопку Продолжить.

Ожидаемый результат: Поле CVC/CVV подсвечивается красным, появляется
сообщение: “Неверный формат”.


Cценарии тестирования API

Предусловие:

Выполняем поочередные проверки для:

дебетовой карте на  http://localhost:8080/api/v1/pay
кредитной карте на http://localhost:8080/api/v1/credit

2. Проверяем поочередно на 2-х БД:

MySQL;
PostgreSQL.

Позитивные сценарии:

Отправка POST-запроса с валидными данными и номером карты со статусом  "APPROVED".
Ожидаемый результат: Status: 200 OK, в базе появляется запись со статусом  "APPROVED"

2. Отправка POST-запроса на с валидными данными и номером карты со статусом "DECLINED".
   Ожидаемый результат: Status: 200 OK, в базе появляется запись со статусом  "DECLINED".


Негативные сценарии:
Отправка пустого POST-запроса.
Ожидаемый результат: Status: 400 Bad Request, в базе отсутствует запись.

2.  Отправка POST- запроса с валидными данными без номера карты.
    Ожидаемый результат: Status: 400 Bad Request, в базе отсутствует запись.

3. Отправка POST-запроса с валидными данными без месяца.
   Ожидаемый результат: Status: 400 Bad Request, в базе отсутствует запись.

4. Отправка POST- запроса с валидными данными без года.
   Ожидаемый результат: Status: 400 Bad Request, в базе отсутствует запись.

5. Отправка POST- запроса с валидными данными без владельца карты.
   Ожидаемый результат: Status: 400 Bad Request, в базе отсутствует запись.

6. Отправка POST- запроса с валидными данными без CVC/CVV.
   Ожидаемый результат: Status 400, в базе отсутствует запись.

Используемые инструментов.

IntelliJ IDEA - для написания кода.
Java 11 - для написания тестов.
JUnit5 - для упрощения процесса написания и выполнения автоматизированных тестов.
Selenide - фреймворк автоматизированного тестирования для веб-приложений.
Lombok - для уменьшения шаблонного кода.
Faker - для генерации данных.
Allure - построения отчетов с графиками и таблицами.
Postman - для проверки API ответов сервера.
Docker - для запуска и управления контейнеров.
DBeaver - для работы с СУБД
Gradle - для автоматизации процесс сборки проекта.
Git - для отслеживания изменений в коде и управления историей разработки программного обеспечения. Для обмена данными между локальным репозиторием и удаленным.
GitHub - для хранения кода.

Рисков при автоматизации.

Отсутствие документации.
Ошибки в работе сервиса.
Отсутствие специальных селекторов.
Использование одновременно двух баз данных.

Интервальная оценка с учетом рисков в часах.
Планирование автоматизации тестирования - 10
Написание автотестов - 35
Обнаружение и создание баг-репортов и отчетов по итогам тестирования - 10
Создание отчета по итогам работы - 7

Итого: 62 часа.

План сдачи работ: когда будут готовы автотесты, результаты их прогона.
Настройка окружения и планирование  - до 23.12.23.
Написание автотестов и тестирование - до 01.01.24.
Подготовка отчетной документации по тестированию - до 07.01.24.
