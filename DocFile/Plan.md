<h2> Планирование автоматизации тестирования сервиса </h2>

<h5> Перечень автоматизируемых сценариев.</h5>

<h4> Тестовые данные:</h4> 
<ol>
<li>Номер карты: 16 цифр. Номер 4444 4444 4444 4441, статус Разрешен. Номер 4444 4444 4444 4442, статус Отклонен.</li>
<li>Месяц: цифры от 01 до 12, формат ХХ.</li>
<li>Год: две последние цифры, формат ХХ.</li>
<li>Владелец: символы латиницы от 1 символа. Разрешен - верхний регистр, дефис, пробел.</li>
<li>CVC/CVV - 3 цифры.</li>
</ol>

<h2> UI-тесты </h2>

<h3> Валидные сценарии.</h3>
<h5> Зайти на сайт <a href="//localhost:8080/"> Банковский сервер </a> </a> </h5>
<h6> Предусловие, для каждого сценария: </h6>
<ol>
<li> 1. Нажать кнопку Купить.</li>
<li> 2. Нажать кнопку Купить в кредит.</li>
</ol>


<h3>.Оплата тура с использованием валидных данных.</h3> 
<h5>Шаги:</h5>
<ol>
<li> Ввести номер карты со статусом ОДОБРЕН.</li>
<li> Ввести валидное значение в поле Месяц.</li>
<li> Ввести валидное значение в поле Год.</li>
<li> Ввести валидное значение в поле Владелец.</li>
<li> Ввести валидное значение в поле CVC/CVV.</li>
<li> Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Появляется сообщение: “Успешно Операция одобрена банком”.
В БД появляется запись с информацией id пользователя, id_bank, временем создания документа и статусом APPROVED.


<h3> 2. Отклоненный платеж при оплате картой со статусом ОТКЛОНЕН и с использованием валидных данных. </h3> 
<h5>  Шаги: </h5>
<ol>
<li> Ввести номер карты со статусом ОТКЛОНЕН.</li>
<li> Ввести валидное значение в поле Месяц.</li>
<li> Ввести валидное значение в поле Год.</li>
<li>  Ввести валидное значение в поле Владелец.</li>
<li> Ввести валидное значение в поле CVC/CVV.</li>
<li> Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Появляется сообщение: “Ошибка! Банк отказал в проведении операции”.
В БД появляется запись с информацией: id пользователя, id_bank, временем создания документа и статусом - DECLINED.

<h3> Невалидные сценарии тестирования UI. </h3>
<h5> Зайти на сайт <a href="http://localhost:8080/" > Банковский сервер </a> </h5>

<h3> 1.Оплата картой без заполнения полей формы.</h3>
<h5> Шаги: </h5>
<li> Нажать кнопку Продолжить. </li>

Ожидаемый результат: Все поля для ввода данных подсвечены красным:
<ol>
<li> под полями с числовыми значениями появляется сообщение: “Неверный формат”; </li>
<li> под полем Владелец: “Поле обязательно для заполнения”. </li> 
</ol>

<h3> 2.Оплата картой с пустым полем Номер карты.</h3>
<h5> Шаги: </h5>
<ol>
<li> Оставить поле Номер карты пустым. </li> 
<li> Ввести валидное значение в поле Месяц. </li> 
<li> Ввести валидное значение в поле Год. </li> 
<li> Ввести валидное значение в поле Владелец. </li> 
<li> Ввести валидное значение в поле CVC/CVV. </li> 
<li> Нажать кнопку Продолжить. </li> 
</ol>
Ожидаемый результат: Поле Номер карты подсвечивается красным,
появляется сообщение: “Неверный формат”.

<h3> 3.Оплата картой с невалидным номером длиной 16 цифр. </h3>
<h5> Шаги: </h5>
<ol>
<li> Ввести номер карты, состоящий из 16 цифр.</li>
<li> Ввести валидное значение в поле Месяц.</li>
<li> Ввести валидное значение в поле Год.</li>
<li> Ввести валидное значение в поле Владелец.</li>
<li> Ввести валидное значение в поле CVC/CVV.</li>
<li> Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Появляется сообщение:  “Ошибка! Банк отказал в проведении операции”.

<h3> 4.Оплата картой с номером длиной 15 цифр.</h3>
<h5> Шаги: </h5>
<ol>
<li>Ввести номер карты, состоящий из 15 цифр.</li>
<li>Ввести валидное значение в поле Месяц.</li>
<li>Ввести валидное значение в поле Год.</li>
<li>Ввести валидное значение в поле Владелец.</li>
<li>Ввести валидное значение в поле CVC/CVV.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле Номер карты подсвечивается красным,
появляется сообщение: “Неверный формат”.


<h3> 5.Оплата с пустым полем Месяц и использованием остальных валидных данных. </h3>
<h5> Шаги:</h5>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Оставить поле Месяц пустым.</li>
<li>Ввести валидное значение в поле Год.</li>
<li>Ввести валидное значение в поле Владелец.</li>
<li>Ввести валидное значение в поле CVC/CVV.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле Месяц подсвечивается красным, появляется
сообщение: “Неверный формат”.

<h3> 6.Оплата со значением 00 в поле Месяц и использованием остальных валидных данных. </h3>
<h5> Шаги: </h5>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Ввести значение 00 в поле Месяц.</li>
<li>Ввести валидное значение в поле Год.</li>
<li>Ввести валидное значение в поле Владелец.</li>
<li>Ввести валидное значение в поле CVC/CVV.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле Месяц подсвечивается красным, появляется
сообщение “Неверный формат”.

<h3> 7.Оплата картой со значением 0 в поле Месяц и использованием валидных данных. </h3>
<h5> Шаги: </h5>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Ввести значение 0 в поле Месяц.</li>
<li>Ввести валидное значение в поле Год.</li>
<li>Ввести валидное значение в поле Владелец.</li>
<li>Ввести валидное значение в поле CVC/CVV.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле Месяц подсвечивается красным, появляется
сообщение “Неверный формат”.

<h3> 8.Оплата с любым значением больше 12 в поле Месяц и использованием остальных валидных данных.</h3>
<h5> Шаги:</h5>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Ввести значение 13 в поле Месяц.</li>
<li>Ввести валидное значение в поле Год.</li>
<li>Ввести валидное значение в поле Владелец.</li>
<li>Ввести валидное значение в поле CVC/CVV.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле Месяц подсвечивается красным, появляется
сообщение: “Неверный формат”.

<h3> 9.Оплата с пустым полем Год и использованием остальных валидных данных.</h3>
<h5> Шаги:</h5>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Ввести валидное значение в поле Месяц.</li>
<li>Оставить поле Год пустым.</li>
<li>Ввести валидное значение в поле Владелец.</li>
<li>Ввести валидное значение в поле CVC/CVV.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле Год  подсвечивается красным, появляется сообщение “Неверный формат”.

<h5> 10.Оплата со значением в поле Год, ранее текущего года и с использованием остальных валидных данных.</h5>
<h3> Шаги:</h3>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Ввести валидное значение в поле Месяц.</li>
<li>Ввести в поле Год значение, ранее текущего года.</li>
<li>Ввести валидное значение в поле Владелец.</li>
<li>Ввести валидное значение в поле CVC/CVV.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле Год  подсвечивается красным, появляется
сообщение: “Истек срок действия карты”.


<h5> 11.Оплата с одной цифрой в поле Год и использованием остальных валидных данных.</h5>
<h3> Шаги: </h3>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Ввести валидное значение в поле Месяц.</li>
<li>Ввести в поле Год одну цифру.</li>
<li>Ввести валидное значение в поле Владелец.</li>
<li>Ввести валидное значение в поле CVC/CVV.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле Месяц подсвечивается красным, появляется
сообщение: “Неверный формат”.

<h5> 12.Оплата с пустым полем Владелец и использованием остальных валидных данных.</h5>
<h3>Шаги:</h3>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Ввести валидное значение в поле Месяц.</li>
<li>Ввести валидное значение в поле Год.</li>
<li>Оставить поле Владелец пустым.</li>
<li>Ввести валидное значение в поле CVC/CVV.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле Владелец подсвечивается красным, появляется сообщение “Поле обязательно для заполнения”.

<h5> 13.Оплата с использованием цифр в поле Владелец и использованием остальных валидных данных. </h5>
<h3> Шаги:</h3>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Ввести валидное значение в поле Месяц.</li>
<li>Ввести валидное значение в поле Год.</li>
<li>Ввести цифры в поле Владелец.</li>
<li>Ввести валидное значение в поле CVC/CVV.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле Владелец подсвечивается красным, появляется сообщение “Неверный формат”.

<h3> 14.Оплата с использованием кириллицы в поле Владелец и использованием остальных валидных данных.</h3>
<h5> Шаги: </h5>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Ввести валидное значение в поле Месяц.</li>
<li>Ввести валидное значение в поле Год.</li>
<li>Ввести кириллицу в поле Владелец.</li>
<li>Ввести валидное значение в поле CVC/CVV.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле Владелец подсвечивается красным, появляется сообщение “Неверный формат”.

<h3> 15.Оплата с использованием спецсимволов в поле Владелец и использованием остальных валидных данных.</h3>
<h5> Шаги:</h5>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Ввести валидное значение в поле Месяц.</li>
<li>Ввести валидное значение в поле Год.</li>
<li>Ввести спецсимволы в поле Владелец.</li>
<li>Ввести валидное значение в поле CVC/CVV.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле Владелец подсвечивается красным, появляется сообщение “Неверный формат”.


<h3> 16.Оплата с пустым полем CVC/CVV и использованием остальных валидных данных. </h3>
<h5>Шаги:</h5>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Ввести валидное значение в поле Месяц.</li>
<li>Ввести валидное значение в поле Год.</li>
<li>Ввести валидное значение в поле Владелец.</li>
<li>Оставить поле CVC/CVV пустым.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле CVC/CVV подсвечивается красным, появляется
сообщение: “Неверный формат”.

<h3> 17.Оплата с двумя цифрами в поле CVC/CVV и использованием остальных валидных данных. </h3>
<h5> Шаги: </h5>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Ввести валидное значение в поле Месяц.</li>
<li>Ввести валидное значение в поле Год.</li>
<li>Ввести валидное значение в поле Владелец.</li>
<li>Ввести в поле CVC/CVV две цифры.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле CVC/CVV подсвечивается красным, появляется
сообщение: “Неверный формат”.

<h3> 18.Оплата с одной цифрой в поле CVC/CVV и использованием остальных валидных данных. </h3>
<h3>Шаги:</h3>
<ol>
<li>Ввести валидный номер карты в поле Номер карты.</li>
<li>Ввести валидное значение в поле Месяц.</li>
<li>Ввести валидное значение в поле Год.</li>
<li>Ввести валидное значение в поле Владелец.</li>
<li>Ввести в поле CVC/CVV одну цифру.</li>
<li>Нажать кнопку Продолжить.</li>
</ol>
Ожидаемый результат: Поле CVC/CVV подсвечивается красным, появляется
сообщение: “Неверный формат”.


<h2> Cценарии тестирования API </h2>

<h5> Предусловие:</h5>
<ol>
<h5> <li> Выполняем поочередные проверки для: </li></h5>

<a href="//localhost:8080/api/v1/pay" >Дебетовая карта </a> <br>
<a href="//localhost:8080/api/v1/credit" >Кредитная карта </a> 

<h5> <li> Проверяем поочередно на 2-х БД:</li> </h5>
</ol>
<li>MySQL;</li><br>
<li>PostgreSQL.</li>

<h3> Позитивные сценарии:</h3>

<li> <h6>Отправка POST-запроса с валидными данными и номером карты со статусом  "APPROVED". </h6> </li>
<i> Ожидаемый результат: Status: 200 OK, в базе появляется запись со статусом  "APPROVED"</i>

<li> <h6>Отправка POST-запроса на с валидными данными и номером карты со статусом "DECLINED".</h6> </li>
  <i> Ожидаемый результат: Status: 200 OK, в базе появляется запись со статусом  "DECLINED".</i>


Негативные сценарии:
Отправка пустого POST-запроса.
Ожидаемый результат: Status: 400 Bad Request, в базе отсутствует запись.

2.  Отправка POST- запроса с валидными данными без номера карты.
    Ожидаемый результат: Status: 400 Bad Request, в базе отсутствует запись.

3. Отправка POST-запроса с валидными данными без месяца.
   Ожидаемый результат: Status: 400 Bad Request, в базе отсутствует запись.

4. Отправка POST- запроса с валидными данными без года.
   Ожидаемый результат: Status: 400 Bad Request, в базе отсутствует запись.

5. Отправка POST- запроса с валидными данными без владельца карты.
   Ожидаемый результат: Status: 400 Bad Request, в базе отсутствует запись.

6. Отправка POST- запроса с валидными данными без CVC/CVV.
   Ожидаемый результат: Status 400, в базе отсутствует запись.

Используемые инструментов.

IntelliJ IDEA - для написания кода.
Java 11 - для написания тестов.
JUnit5 - для упрощения процесса написания и выполнения автоматизированных тестов.
Selenide - фреймворк автоматизированного тестирования для веб-приложений.
Lombok - для уменьшения шаблонного кода.
Faker - для генерации данных.
Allure - построения отчетов с графиками и таблицами.
Postman - для проверки API ответов сервера.
Docker - для запуска и управления контейнеров.
DBeaver - для работы с СУБД
Gradle - для автоматизации процесс сборки проекта.
Git - для отслеживания изменений в коде и управления историей разработки программного обеспечения. Для обмена данными между локальным репозиторием и удаленным.
GitHub - для хранения кода.

Рисков при автоматизации.

Отсутствие документации.
Ошибки в работе сервиса.
Отсутствие специальных селекторов.
Использование одновременно двух баз данных.

Интервальная оценка с учетом рисков в часах.
Планирование автоматизации тестирования - 10
Написание автотестов - 35
Обнаружение и создание баг-репортов и отчетов по итогам тестирования - 10
Создание отчета по итогам работы - 7

Итого: 62 часа.

План сдачи работ: когда будут готовы автотесты, результаты их прогона.
Настройка окружения и планирование  - до 23.12.23.
Написание автотестов и тестирование - до 01.01.24.
Подготовка отчетной документации по тестированию - до 07.01.24.
